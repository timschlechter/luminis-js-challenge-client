<div class="chat">
	<!-- Navbar -->
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="navbar-inner">
			<div class="container-fluid">
				<!-- Users -->
				<ul class="nav pull-left users">
					<li class="dropdown">
						<button type="button" class="btn btn-inverse dropdown-toggle" data-toggle="dropdown">
							<span class="icon-user icon-white"></span>
						</button>
						<ul class="dropdown-menu" ng-include src="'views/UserList.html'"></ul>
					</li>
				</ul>

				<!-- Options -->
				<ul class="nav pull-right">
					<li class="dropdown">
						<button type="button" class="btn btn-inverse dropdown-toggle" data-toggle="dropdown">
							<span class="icon-cog icon-white"></span>
						</button>
						<ul class="dropdown-menu">
							<li ng-click="toggleWolframAlpha()">
								<a>
									Wolfram Alpha
									<span ng-hide="wolframAlphaStarted">aanzetten</span>
									<span ng-show="wolframAlphaStarted">uitzetten</span>
								</a>
							</li>
							<li class="divider"></li>
							<li ng-click="logout()"><a>Afmelden</a></li>
						</ul>
					</li>
				</ul>

				<p class="pull-right navbar-text">
					Aangemeld als {{currentUser.name}}&nbsp;
				</p>
			</div>
		</div>
	</div>

	<div class="container-fluid" ng-class="{invisible:!currentUser}">
		<div class="row-fluid">

			<!-- Sidebar -->
			<div class="span3 sidebar">
				<div class="well sidebar-nav onlybigscreen">
					<li class="nav-header">Gebruikers</li>
					 <ul class="nav nav-list userlist" ng-include src="'views/UserList.html'"></ul>
				</div>
			</div>

			<!-- Content -->
			<div class="span9 pull-right">
				
				<!-- Tabs -->
				<div class="tabs span9">
					<ul class="nav nav-tabs">
						<li ng-repeat="chat in chats" ng-class="{active:chat==selectedChat}" ng-click="selectUser(chat.recipient)">
					 		<a href="#{{chat.recipient.name}}" data-toggle="tab">
								<i class="icon-comment" ng-hide="!chat.recipient.newMessages"></i>
					 			{{chat.recipient.name|truncate:16}}&nbsp;<button class="close" type="button" ng-click="closeChat(chat)"><i class="icon-remove"></i></button>
					 		</a>
					 	</li>
					</ul>
				</div>

				<!-- Tab contents -->
				<div class="tab-content">
					<div ng-repeat="chat in chats" id="{{chat.recipient.name}}" class="tab-pane" ng-class="{active:chat==selectedChat}">
						<!-- Messages -->
						<div class="messages media ">
							<div ng-repeat="message in chat.messages" class="popover" ng-class="{right:message.sender==chat.recipient.name, left:message.sender!=chat.recipient.name}" scroll-if="$last">
								<div class="arrow"></div>
								<div class="popover-content">
									<p>{{message.content}}</p>
									<i>{{message.timestamp | date:"dd-MM-yyyy HH:mm:ss"}}</i>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Bottom toolbar -->
	<div class="navbar-form navbar-fixed-bottom">
		<div class="navbar-inner">
			<div class="container-fluid">
				<form ng-submit="sendMessage(selectedChat, text)" name="sendMessageForm">
					 <div class="input-append">
						<input type="text" class="span11" ng-model="text" ng-disabled="!selectedChat" required placeholder="Type hier je bericht naar" >
						<button class="clearfix btn btn-primary" ng-disabled="!(sendMessageForm.$valid && selectedChat)">Verstuur</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>